@model TH_BUOI2.Models.Product

@{
	ViewData["Title"] = "Chi tiết sản phẩm";
	var reviews = ViewData["Reviews"] as IEnumerable<TH_BUOI2.Models.Review>;
	var averageRating = ViewData["AverageRating"] as double? ?? 0.0;
	var categories = ViewData["CategoryName"] as TH_BUOI2.Models.Category;
}
<!-- SECTION -->
<div class="section">
	<!-- container -->
	<div class="container">
		<!-- row -->
		<div class="row">
			<!-- Product main img -->
			<div class="col-md-5 col-md-push-2">
				<div id="product-main-img">
					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>
				</div>
			</div>
			<!-- /Product main img -->
			<!-- Product thumb imgs -->
			<div class="col-md-2  col-md-pull-5">
				<div id="product-imgs">
					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>

					<div class="product-preview">
						<img src="@Model.ImageUrl" alt="">
					</div>
				</div>
			</div>
			<!-- /Product thumb imgs -->
			<!-- Product details -->
			<div class="col-md-5">
				<div class="product-details">
					<h2 class="product-name">@Model.Name</h2>
					<div>
						<div class="product-rating">
							<!-- Display the average rating stars -->
							@for (int i = 0; i < (int)(double)ViewData["AverageRating"]; i++)
							{
								<i class="fa fa-star"></i>
							}
							@for (int i = (int)(double)ViewData["AverageRating"]; i < 5; i++)
							{
								<i class="fa fa-star-o empty"></i>
							}
						</div>
						<a class="review-link" href="#">@ViewData["ReviewCount"] Review(s) | Add your review</a>
					</div>
					<div>
						<h3 class="product-price">@Model.Sale_price<del class="product-old-price">@Model.Price</del></h3>
						@if (Model.SoLuong > 0)
						{
							<span class="product-available">In Stock</span>
						}
						else
						{
							<span class="product-available">Out of Stock</span>
						}
					</div>
					<!-- Additional Information Section -->
					<div class="card">
						<div class="card-body">
							<h5 class="card-title">Thông Tin Chi Tiết</h5>
							<ul class="list-group list-group-flush">
								<li class="list-group-item">Hệ điều hành: @Model.HeDieuHanh</li>
								<li class="list-group-item">CPU: @Model.CPU</li>
								<li class="list-group-item">RAM: @Model.RAM</li>
								<li class="list-group-item">Ổ cứng: @Model.OCung</li>
								<li class="list-group-item">Card đồ họa: @Model.CardDoHoa</li>
							</ul>
						</div>
					</div>

					<div class="product-options">
						<label>
							Size
							<select class="input-select">
								<option value="0">X</option>
							</select>
						</label>
						<label>
							Color
							<select class="input-select">
								<option value="0">Red</option>
							</select>
						</label>
					</div>

					<div class="add-to-cart">
						<div class="qty-label">
							Qty
							<div class="input-number">
								<input type="number">
								<span class="qty-up">+</span>
								<span class="qty-down">-</span>
							</div>
						</div>
						<button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
					</div>

					<ul class="product-btns">
						<li><a href="#"><i class="fa fa-heart-o"></i> add to wishlist</a></li>
						<li><a href="#"><i class="fa fa-exchange"></i> add to compare</a></li>
					</ul>

					<ul class="product-links">
						<li>Category:</li>
						<li><a href="#">Headphones</a></li>
						<li><a href="#">Accessories</a></li>
					</ul>

					<ul class="product-links">
						<li>Share:</li>
						<li><a href="#"><i class="fa fa-facebook"></i></a></li>
						<li><a href="#"><i class="fa fa-twitter"></i></a></li>
						<li><a href="#"><i class="fa fa-google-plus"></i></a></li>
						<li><a href="#"><i class="fa fa-envelope"></i></a></li>
					</ul>

				</div>
			</div>
			<!-- /Product details -->
			<!-- Product tab -->
			<div class="col-md-12">
				<div id="product-tab">
					<!-- product tab nav -->
					<ul class="tab-nav">
						<li class="active"><a data-toggle="tab" href="#tab1">Description</a></li>
						<li><a data-toggle="tab" href="#tab2">Details</a></li>
						<li><a data-toggle="tab" href="#tab3">Reviews (@ViewData["ReviewCount"])</a></li>
					</ul>
					<!-- /product tab nav -->
					<!-- product tab content -->
					<div class="tab-content">
						<!-- tab1  -->
						<div id="tab1" class="tab-pane fade in active">
							<div class="row">
								<div class="col-md-12">
									<p>@Model.Mo_ta</p>
								</div>
							</div>
						</div>
						<!-- /tab1  -->
						<!-- tab2  -->
						<div id="tab2" class="tab-pane fade in">
							<div class="row">
								<div class="col-md-12">
									<div class="card">
										<div class="card-body">
											<h5 class="card-title">Thông Tin Chi Tiết</h5>
											<ul class="list-group list-group-flush">
												<li class="list-group-item">Hệ điều hành: @Model.HeDieuHanh</li>
												<li class="list-group-item">CPU: @Model.CPU</li>
												<li class="list-group-item">RAM: @Model.RAM</li>
												<li class="list-group-item">Ổ cứng: @Model.OCung</li>
												<li class="list-group-item">Card đồ họa: @Model.CardDoHoa</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- /tab2  -->
						<!-- tab3  -->
						<div id="tab3" class="tab-pane fade in">
							<div class="row">
								<!-- Rating -->
								<!-- Rating -->
								<div class="col-md-3">
									<div id="rating">
										<div class="rating-avg">
											<!-- Sử dụng Math.Round để làm tròn giá trị điểm đánh giá trung bình -->
											<span>@Math.Round(averageRating, 1)</span>
											<div class="rating-stars">
												@for (int i = 0; i < 5; i++)
												{
													if (i < (int)averageRating)
													{
														<i class="fa fa-star"></i>
													}
													else
													{
														<i class="fa fa-star-o"></i>
													}
												}
											</div>
										</div>
										<ul class="rating">
											@for (int i = 5; i >= 1; i--)
											{
												var ratingCountKey = $"RatingCount{i}";
												var ratingPercentageKey = $"RatingPercentage{i}";

												var ratingCount = ViewData.ContainsKey(ratingCountKey) ? (int)ViewData[ratingCountKey] : 0;
												var ratingPercentage = ViewData.ContainsKey(ratingPercentageKey) ? (double)ViewData[ratingPercentageKey] : 0.0;

												<li>
													<div class="rating-stars">
														@for (int j = 0; j < i; j++)
														{
															<i class="fa fa-star"></i>
														}
														@for (int j = i; j < 5; j++)
														{
															<i class="fa fa-star-o"></i>
														}
													</div>
													<div class="rating-progress">
														<div style="width: @ratingPercentage%;"></div>
													</div>
													<span class="sum">@ratingCount</span>
												</li>
											}
										</ul>
									</div>
								</div>
								
								<!-- /Rating -->
								<!-- Reviews -->
								<div class="col-md-6">
									<div id="reviews">
										<ul class="reviews">
											@foreach (var review in reviews)
											{
												<li>
													<div class="review-heading">
														<h5 class="name">@review.Name</h5>
														<p class="date">@review.CreatedAt.ToString("dd MMM yyyy, h:mm tt")</p>
														<div class="review-rating">
															@for (int i = 0; i < review.Rating; i++)
															{
																<i class="fa fa-star"></i>
															}
															@for (int i = review.Rating; i < 5; i++)
															{
																<i class="fa fa-star-o empty"></i>
															}
														</div>
													</div>
													<div class="review-body">
														<p>@review.Content</p>
													</div>
												</li>
											}
										</ul>
									</div>
								</div>
								<!-- /Reviews -->
								<!-- Review Form -->
								<div class="col-md-3">
									<div id="review-form">
										<form class="review-form" method="post" asp-action="CreateReview" asp-controller="Product">
											<input type="hidden" name="ProductId" value="@Model.Id">
											<input class="input" type="text" placeholder="Your Name" name="Name">
											<input class="input" type="email" placeholder="Your Email" name="Email">
											<textarea class="input" placeholder="Your Review" name="Content"></textarea>
											<div class="input-rating">
												<span>Your Rating: </span>
												<div class="stars">
													<input id="star5" name="Rating" value="5" type="radio"><label for="star5"></label>
													<input id="star4" name="Rating" value="4" type="radio"><label for="star4"></label>
													<input id="star3" name="Rating" value="3" type="radio"><label for="star3"></label>
													<input id="star2" name="Rating" value="2" type="radio"><label for="star2"></label>
													<input id="star1" name="Rating" value="1" type="radio"><label for="star1"></label>
												</div>
											</div>
											<button class="primary-btn">Submit</button>
										</form>
									</div>
								</div>
								<!-- /Review Form -->
							</div>
						</div>
						<!-- /tab3  -->
					</div>
					<!-- /product tab content  -->
				</div>
			</div>
			<!-- /product tab -->
		</div>
		<!-- /row -->
	</div>
	<!-- /container -->
</div>
<!-- /SECTION -->
